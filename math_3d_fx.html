<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>3D Function Plotter</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 2rem;
      background-color: #f0f0f0;
    }
    #plot {
      width: 100%;
      height: 600px;
    }
    input, button {
      font-size: 1rem;
      margin: 0.5rem 0;
    }
  </style>
</head>
<body>
  <h1>3D Function Plotter</h1>
  <label for="functionInput">Enter function z = f(x, y):</label><br>
  <input type="text" id="functionInput" value="Math.sin(x) * Math.cos(y)" style="width: 100%;">
  <button onclick="drawPlot()">Draw</button>
  <div id="plot"></div>

  <script>
    function drawPlot() {
      const funcStr = document.getElementById("functionInput").value;
      const xRange = numeric.linspace(-10, 10, 50);
      const yRange = numeric.linspace(-10, 10, 50);

      let zData = [];

      for (let i = 0; i < xRange.length; i++) {
        let zRow = [];
        for (let j = 0; j < yRange.length; j++) {
          const x = xRange[i];
          const y = yRange[j];
          try {
            const z = eval(funcStr);
            zRow.push(z);
          } catch (e) {
            zRow.push(0);
          }
        }
        zData.push(zRow);
      }

      const data = [{
        z: zData,
        x: xRange,
        y: yRange,
        type: 'surface'
      }];

      Plotly.newPlot('plot', data);
    }

    // Load numeric.js for linspace
    const script = document.createElement('script');
    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js';
    document.head.appendChild(script);
  </script>
</body>
</html>
