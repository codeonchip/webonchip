<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CRC8-H2F Calculator</title>
  <style>
    body { font-family: monospace; max-width: 800px; margin: auto; padding: 1em; background: #f8f8f8; }
    textarea { width: 100%; height: 80px; font-family: monospace; }
    table { border-collapse: collapse; margin-top: 1em; }
    td, th { border: 1px solid #999; padding: 4px 8px; text-align: center; }
    .crc-result { font-size: 1.5em; color: green; margin-top: 1em; }
    .table-scroll { max-height: 250px; overflow-y: auto; margin-top: 1em; border: 1px solid #ccc; }
    .buttons { margin-top: 0.5em; }
    button { font-size: 1em; padding: 6px 12px; margin-right: 10px; }
  </style>
</head>
<body>

<h1>CRC8-H2F Calculator</h1>

<label for="input">Enter hex bytes (e.g. <code>01 02 03</code>):</label>
<textarea id="input" placeholder="Enter hex values..."></textarea>

<div class="buttons">
  <button onclick="calculateCRC()">Compute CRC8-H2F</button>
  <button onclick="resetForm()">Reset</button>
</div>

<div class="crc-result" id="result">CRC: 0x--</div>

<div class="table-scroll">
  <table>
    <thead><tr><th>Index</th><th>Value (Hex)</th></tr></thead>
    <tbody id="crcTableBody"></tbody>
  </table>
</div>

<script>
  const crc8h2f_table = [
    0x00,0x2F,0x5E,0x71,0xBC,0x93,0xE2,0xCD,0x57,0x78,0x09,0x26,0xEB,0xC4,0xB5,0x9A,
    0xAE,0x81,0xF0,0xDF,0x12,0x3D,0x4C,0x63,0xF9,0xD6,0xA7,0x88,0x45,0x6A,0x1B,0x34,
    0x73,0x5C,0x2D,0x02,0xCF,0xE0,0x91,0xBE,0x24,0x0B,0x7A,0x55,0x98,0xB7,0xC6,0xE9,
    0xDD,0xF2,0x83,0xAC,0x61,0x4E,0x3F,0x10,0x8A,0xA5,0xD4,0xFB,0x36,0x19,0x68,0x47,
    0xE6,0xC9,0xB8,0x97,0x5A,0x75,0x04,0x2B,0xB1,0x9E,0xEF,0xC0,0x0D,0x22,0x53,0x7C,
    0x48,0x67,0x16,0x39,0xF4,0xDB,0xAA,0x85,0x1F,0x30,0x41,0x6E,0xA3,0x8C,0xFD,0xD2,
    0x95,0xBA,0xCB,0xE4,0x29,0x06,0x77,0x58,0xC2,0xED,0x9C,0xB3,0x7E,0x51,0x20,0x0F,
    0x3B,0x14,0x65,0x4A,0x87,0xA8,0xD9,0xF6,0x6C,0x43,0x32,0x1D,0xD0,0xFF,0x8E,0xA1,
    0x3D,0x12,0x63,0x4C,0x81,0xAE,0xDF,0xF0,0x62,0x4D,0x3C,0x13,0xDE,0xF1,0x80,0xAF,
    0x9B,0xB4,0xC5,0xEA,0x27,0x08,0x79,0x56,0xCC,0xE3,0x92,0xBD,0x70,0x5F,0x2E,0x01,
    0x46,0x69,0x18,0x37,0xFA,0xD5,0xA4,0x8B,0x11,0x3E,0x4F,0x60,0xAD,0x82,0xF3,0xDC,
    0xE8,0xC7,0xB6,0x99,0x54,0x7B,0x0A,0x25,0xBF,0x90,0xE1,0xCE,0x03,0x2C,0x5D,0x72,
    0xD3,0xFC,0x8D,0xA2,0x6F,0x40,0x31,0x1E,0x84,0xAB,0xDA,0xF5,0x38,0x17,0x66,0x49,
    0x7D,0x52,0x23,0x0C,0xC1,0xEE,0x9F,0xB0,0x2A,0x05,0x74,0x5B,0x96,0xB9,0xC8,0xE7,
    0xA0,0x8F,0xFE,0xD1,0x1C,0x33,0x42,0x6D,0xF7,0xD8,0xA9,0x86,0x4B,0x64,0x15,0x3A,
    0x0E,0x21,0x50,0x7F,0xB2,0x9D,0xEC,0xC3,0x59,0x76,0x07,0x28,0xE5,0xCA,0xBB,0x94
  ];

  function calculateCRC() {
    const input = document.getElementById("input").value.trim();
    if (!input) return;

    const bytes = input.split(/\s+/).map(h => parseInt(h, 16));
    let crc = 0xFF;
    for (let i = 0; i < bytes.length; ++i) {
      crc = crc8h2f_table[crc ^ bytes[i]];
    }
    crc ^= 0xFF;

    document.getElementById("result").textContent = `CRC: 0x${crc.toString(16).padStart(2, '0').toUpperCase()}`;
  }

  function resetForm() {
    document.getElementById("input").value = '';
    document.getElementById("result").textContent = 'CRC: 0x--';
    document.getElementById("input").focus();
  }

  function fillTable() {
    const tableBody = document.getElementById("crcTableBody");
    crc8h2f_table.forEach((val, idx) => {
      const row = document.createElement("tr");
      const tdIndex = document.createElement("td");
      tdIndex.textContent = idx.toString(16).padStart(2, '0').toUpperCase();
      const tdVal = document.createElement("td");
      tdVal.textContent = val.toString(16).padStart(2, '0').toUpperCase();
      row.appendChild(tdIndex);
      row.appendChild(tdVal);
      tableBody.appendChild(row);
    });
  }

  fillTable();
</script>

</body>
</html>
