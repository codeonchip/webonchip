<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>World Clocks â€” AM/PM Colors</title>
<style>
  :root{--bg:#0e1014;--panel:#151922;--muted:#98a2b3;--text:#e6eaf2;--accent:#5b8cff;--am:#22c55e;--pm:#f59e0b}
  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:radial-gradient(1200px 800px at 50% -20%, #161b27, #0b0d12);color:var(--text);display:grid;grid-template-rows:auto 1fr}
  header{position:sticky;top:0;z-index:10;backdrop-filter:saturate(1.2) blur(6px);background:linear-gradient(180deg, #0f1422ee, #0f1422cc 60%, transparent);border-bottom:1px solid #1e2431}
  .bar{display:flex;align-items:center;gap:12px;padding:12px 16px;flex-wrap:wrap}
  .brand{font-weight:800;letter-spacing:.3px}
  .badge{color:var(--muted);font-size:12px}
  .group{display:flex;align-items:center;gap:8px;background:#121726;border:1px solid #222a3b;border-radius:12px;padding:8px}
  input[type="text"], select{background:#0e1422;border:1px solid #20283a;color:var(--text);padding:8px 10px;border-radius:10px;min-width:220px}
  button{appearance:none;border:1px solid #2a3450;background:#121a30;color:#dbe3ff;border-radius:10px;padding:8px 12px;cursor:pointer}
  button:hover{filter:brightness(1.05)}
  .switch{display:inline-flex;align-items:center;gap:6px;font-size:12px;color:var(--muted)}
  .grid{padding:16px;display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:14px}
  .card{background:linear-gradient(180deg,#141a27,#111623);border:1px solid #1f2636;border-radius:14px;padding:14px;display:flex;flex-direction:column;gap:6px;box-shadow:0 10px 30px #0005}
  .row{display:flex;justify-content:space-between;align-items:center;gap:8px}
  .city{font-weight:700}
  .time{font:700 26px ui-sans-serif,system-ui,-apple-system,Segoe UI}
  .time.am{color:var(--am)}
  .time.pm{color:var(--pm)}
  .date{color:var(--muted);font-size:12px}
  .meta{color:var(--muted);font-size:12px}
  .pill{display:inline-flex;align-items:center;gap:6px;font-size:12px;border:1px solid #2a3450;border-radius:999px;padding:4px 8px;background:#0f1527}
  .label{color:#a6b1c5;font-size:12px}
  .right{display:flex;gap:6px;align-items:center}
  .ghostbtn{background:transparent;border:1px dashed #2a3450}
  .empty{opacity:.7;text-align:center;padding:40px 10px}
  .hint{opacity:.7;font-size:12px}
</style>
</head>
<body>
<header>
  <div class="bar">
    <div class="brand">ðŸ•’ World Clocks</div>
    <div class="badge" id="localBadge"></div>
    <div class="group">
      <input id="search" type="text" placeholder="Search city or timezoneâ€¦ (e.g., Tokyo, Europe/London)"/>
      <button id="addBtn">Add</button>
    </div>
    <div class="group">
      <label class="switch"><input id="showSeconds" type="checkbox"/> Seconds</label>
      <label class="switch"><input id="is24h" type="checkbox"/> 24â€‘hour</label>
      <label class="switch"><input id="showUTC" type="checkbox" checked/> Show UTC card</label>
      <label class="switch"><input id="sortByOffset" type="checkbox"/> Sort by UTC offset</label>
    </div>
    <div class="group">
      <select id="quick">
        <option value="">Quick addâ€¦</option>
        <option>America/Chicago</option>
        <option>America/New_York</option>
        <option>America/Los_Angeles</option>
        <option>America/Denver</option>
        <option>Europe/London</option>
        <option>Europe/Paris</option>
        <option>Europe/Berlin</option>
        <option>Europe/Istanbul</option>
        <option>Europe/Moscow</option>
        <option>Africa/Cairo</option>
        <option>Africa/Johannesburg</option>
        <option>Asia/Dubai</option>
        <option>Asia/Tehran</option>
        <option>Asia/Karachi</option>
        <option>Asia/Kolkata</option>
        <option>Asia/Dhaka</option>
        <option>Asia/Bangkok</option>
        <option>Asia/Singapore</option>
        <option>Asia/Hong_Kong</option>
        <option>Asia/Taipei</option>
        <option>Asia/Shanghai</option>
        <option>Asia/Seoul</option>
        <option>Asia/Tokyo</option>
        <option>Australia/Perth</option>
        <option>Australia/Adelaide</option>
        <option>Australia/Sydney</option>
        <option>Pacific/Auckland</option>
        <option>Pacific/Honolulu</option>
      </select>
    </div>
  </div>
</header>
<main>
  <div id="grid" class="grid"></div>
  <div id="empty" class="empty" style="display:none">
    <div>No clocks yet. Use <b>Quick addâ€¦</b> or search a timezone to add your first card.</div>
    <div class="hint">Examples: <code>Asia/Tokyo</code>, <code>Europe/London</code>, <code>America/Sao_Paulo</code></div>
  </div>
</main>
<script>
(function(){
  const grid = document.getElementById('grid');
  const search = document.getElementById('search');
  const addBtn = document.getElementById('addBtn');
  const quick = document.getElementById('quick');
  const showSeconds = document.getElementById('showSeconds');
  const is24h = document.getElementById('is24h');
  const showUTC = document.getElementById('showUTC');
  const sortByOffset = document.getElementById('sortByOffset');
  const empty = document.getElementById('empty');
  const localBadge = document.getElementById('localBadge');

  const localTZ = Intl.DateTimeFormat().resolvedOptions().timeZone || 'UTC';
  localBadge.textContent = `Your timezone: ${localTZ}`;

  let state = { zones: [], showSeconds: false, is24h: false, showUTC: true, sortByOffset: false };
  const key = 'world-clocks-state-v1';
  function save(){ localStorage.setItem(key, JSON.stringify(state)); }
  function load(){ try{ const s = JSON.parse(localStorage.getItem(key)||'null'); if (s) state = { ...state, ...s }; }catch{} }
  load();
  if (state.zones.length===0) state.zones = [localTZ,'UTC','America/New_York','Europe/London','Asia/Tokyo'];

  showSeconds.checked = state.showSeconds;
  is24h.checked = state.is24h;
  showUTC.checked = state.showUTC;
  sortByOffset.checked = state.sortByOffset;

  function fmt(dt, tz) {
    const opts = { hour:'2-digit', minute:'2-digit', hour12: !state.is24h, timeZone: tz };
    if (state.showSeconds) opts.second='2-digit';
    return new Intl.DateTimeFormat(undefined, opts).format(dt);
  }
  function fmtDate(dt, tz){
    return new Intl.DateTimeFormat(undefined,{weekday:'short',year:'numeric',month:'short',day:'numeric',timeZone:tz}).format(dt);
  }
  function utcOffsetLabel(tz){
    const dt = new Date();
    const parts = new Intl.DateTimeFormat('en-US',{timeZone:tz,timeZoneName:'shortOffset',hour:'2-digit'}).formatToParts(dt);
    return parts.find(p=>p.type==='timeZoneName')?.value.replace('GMT','UTC')||'';
  }
  function isDST(tz){
    const now=new Date();const jan=new Date(now.getFullYear(),0,1);const jul=new Date(now.getFullYear(),6,1);
    const std=Math.max(jan.getTimezoneOffset(),jul.getTimezoneOffset());
    const cur=new Date(now.toLocaleString('en-US',{timeZone:tz}));
    return cur.getTimezoneOffset()<std;
  }

  function normalize(s){ if(!s) return ''; const k=s.trim().toLowerCase(); if(k==='utc'||k==='gmt') return 'UTC'; return s.trim(); }

  function addZone(tz){ try{ new Intl.DateTimeFormat(undefined,{timeZone:tz}).format(new Date()); if(!state.zones.includes(tz)) state.zones.push(tz); save(); render(); }catch{ alert('Unknown timezone: '+tz); } }
  function removeZone(tz){ state.zones=state.zones.filter(z=>z!==tz); save(); render(); }

  function render(){
    const hasUTC=state.zones.includes('UTC');
    if(state.showUTC&&!hasUTC) state.zones.unshift('UTC');
    if(!state.showUTC&&hasUTC) state.zones=state.zones.filter(z=>z!=='UTC');
    let zones=[...state.zones];
    if(state.sortByOffset) zones.sort((a,b)=> new Date().toLocaleString('en-US',{timeZone:a})>new Date().toLocaleString('en-US',{timeZone:b})?1:-1);
    grid.innerHTML=''; empty.style.display=zones.length?'none':'block';
    const now=new Date();
    for(const tz of zones){
      const card=document.createElement('div'); card.className='card';
      const city=tz.includes('/')?tz.split('/')[1].replace('_',' '):tz;
      const timeStr=fmt(now,tz);
      const hours=new Intl.DateTimeFormat('en-US',{hour:'numeric',hour12:true,timeZone:tz}).format(now);
      const ampm=hours.includes('AM')?'am':'pm';
      const top=document.createElement('div'); top.className='row';
      top.innerHTML=`<div class="city">${city}</div><div class="right"><span class="pill">${utcOffsetLabel(tz)}</span><button class="ghostbtn">âœ–</button></div>`;
      const mid=document.createElement('div'); mid.className='row';
      mid.innerHTML=`<div class="time ${ampm}" data-tz="${tz}">${timeStr}</div>`;
      const bot=document.createElement('div'); bot.className='row';
      const dst=isDST(tz);
      bot.innerHTML=`<div class="date">${fmtDate(now,tz)}</div><div class="meta">DST: <span style="color:${dst?'#22c55e':'#94a3b8'}">${dst?'Yes':'No'}</span></div>`;
      card.appendChild(top);card.appendChild(mid);card.appendChild(bot);grid.appendChild(card);
      top.querySelector('button').addEventListener('click',()=>removeZone(tz));
    }
  }

  setInterval(()=>{const now=new Date();grid.querySelectorAll('.time').forEach(n=>{const tz=n.dataset.tz;n.textContent=fmt(now,tz);const hours=new Intl.DateTimeFormat('en-US',{hour:'numeric',hour12:true,timeZone:tz}).format(now);n.classList.toggle('am',hours.includes('AM'));n.classList.toggle('pm',hours.includes('PM'));});},1000);

  addBtn.addEventListener('click',()=>{const tz=normalize(search.value);if(tz) addZone(tz);search.value='';});
  search.addEventListener('keydown',e=>{if(e.key==='Enter') addBtn.click();});
  quick.addEventListener('change',()=>{if(quick.value){addZone(quick.value);quick.value='';}});
  showSeconds.addEventListener('change',()=>{state.showSeconds=showSeconds.checked;save();render();});
  is24h.addEventListener('change',()=>{state.is24h=is24h.checked;save();render();});
  showUTC.addEventListener('change',()=>{state.showUTC=showUTC.checked;save();render();});
  sortByOffset.addEventListener('change',()=>{state.sortByOffset=sortByOffset.checked;save();render();});

  render();
})();
</script>
</body>
</html>
