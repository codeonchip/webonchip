<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>All‑in‑One Unit Converter</title>
  <style>
    :root{
      --bg:#0b1020; --panel:#121936; --panel-2:#0f1530; --text:#e9eefc; --muted:#a9b3d0; --accent:#7aa2ff; --accent-2:#6ee7b7; --danger:#ff6b6b;
      --radius:16px;
    }
    *{box-sizing:border-box}
    body{margin:0; font:16px/1.35 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; color:var(--text); background:radial-gradient(1200px 700px at 20% -10%, #1a245a 0, transparent 60%), radial-gradient(900px 700px at 120% 10%, #0b4f4a 0, transparent 55%), var(--bg);}
    header{padding:28px 20px 8px; text-align:center}
    h1{margin:0 0 6px; font-size:clamp(22px, 3.2vw, 36px); letter-spacing:.2px}
    p.subtitle{margin:0; color:var(--muted)}

    .container{max-width:1100px; margin:24px auto 56px; padding:0 16px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.09); border-radius:var(--radius); box-shadow:0 10px 30px rgba(0,0,0,.25);}
    .grid{display:grid; grid-template-columns:1fr; gap:16px}
    @media (min-width:880px){ .grid{ grid-template-columns: 340px 1fr } }

    .left{padding:16px}
    .right{padding:16px; background:linear-gradient(180deg, var(--panel) 0, var(--panel-2) 100%); border-bottom-left-radius:var(--radius); border-bottom-right-radius:var(--radius)}
    @media (min-width:880px){ .left{border-right:1px solid rgba(255,255,255,.06); border-top-left-radius:var(--radius); border-bottom-left-radius:var(--radius)} .right{border-top-right-radius:var(--radius); border-bottom-right-radius:var(--radius)} }

    .row{display:grid; grid-template-columns:1fr 1fr; gap:10px}
    .row-3{display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px}
    label{font-size:12px; color:var(--muted); display:block; margin:2px 0 6px}
    input, select{width:100%; background:#0e1530; color:var(--text); border:1px solid rgba(255,255,255,.12); border-radius:10px; padding:11px 12px; outline:none}
    input:focus, select:focus{border-color:var(--accent); box-shadow:0 0 0 3px rgba(122,162,255,.25)}
    input[type="number"]{appearance:textfield}
    button{cursor:pointer; border:1px solid rgba(255,255,255,.12); background:#101735; color:var(--text); padding:10px 14px; border-radius:10px}
    button.primary{background:linear-gradient(90deg, var(--accent) 0, #68d8ff 100%); color:#00122b; border:none; font-weight:700}
    button.ghost{background:transparent}
    .quick{display:flex; flex-wrap:wrap; gap:8px; margin-top:8px}
    .quick button{padding:8px 10px; font-size:13px; border-color:rgba(255,255,255,.15); background:#0c1330}
    .result{font-size: clamp(22px, 2.6vw, 28px); font-weight:800; letter-spacing:.25px; padding:10px 12px; border-radius:12px; background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.1)}
    .muted{color:var(--muted)}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
    small.note{display:block; color:var(--muted); margin-top:6px}
    .footer{margin-top:16px; display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between}
    .kicker{font-size:12px; color:var(--muted)}
    .pill{display:inline-flex; align-items:center; gap:8px; border:1px solid rgba(255,255,255,.12); padding:8px 10px; border-radius:999px}
    .ok{color:var(--accent-2)}
  </style>
</head>
<body>
  <header>
    <h1>All‑in‑One Unit Converter</h1>
    <p class="subtitle">Fast, offline, no libraries. Pick a category, enter a value, and convert between dozens of common units.</p>
  </header>

  <main class="container">
    <section class="card grid">
      <div class="left">
        <div>
          <label for="category">Category</label>
          <select id="category" aria-label="Unit category"></select>
          <div class="quick" id="quick-cats"></div>
        </div>

        <div style="margin-top:14px" class="row">
          <div>
            <label for="fromSearch">Filter units</label>
            <input id="fromSearch" placeholder="Type to filter (e.g., psi, mph)" />
          </div>
          <div>
            <label for="decimals">Decimals</label>
            <input id="decimals" type="number" min="0" max="12" step="1" value="6" />
          </div>
        </div>

        <div style="margin-top:10px" class="row">
          <div>
            <label for="fromUnit">From unit</label>
            <select id="fromUnit"></select>
          </div>
          <div>
            <label for="toUnit">To unit</label>
            <select id="toUnit"></select>
          </div>
        </div>

        <div style="margin-top:10px" class="row-3">
          <div>
            <label for="fromValue">Value</label>
            <input id="fromValue" type="number" inputmode="decimal" value="1" />
          </div>
          <div style="display:flex; align-items:flex-end; gap:8px">
            <button id="swapBtn" title="Swap units">⇄ Swap</button>
            <button id="convertBtn" class="primary">Convert</button>
          </div>
          <div style="display:flex; align-items:flex-end; gap:8px">
            <button id="copyBtn" class="ghost" title="Copy result">Copy Result</button>
          </div>
        </div>

        <small class="note">Tip: Type a unit code (e.g., <span class="mono">psi</span>, <span class="mono">kWh</span>, <span class="mono">°F</span>) into the filter to jump quickly. Press <span class="mono">Enter</span> to convert.</small>
      </div>

      <div class="right">
        <div>
          <div class="kicker">Result</div>
          <div id="result" class="result">—</div>
          $1
          <div class="kicker" style="margin-top:12px">Hex (integer)</div>
          <div id="hexResult" class="result" style="font-feature-settings:'tnum' 1; font-variant-numeric: tabular-nums;">—</div>
          <small class="note">Shows <span class="mono">int(value)</span> in hexadecimal for both input and result.</small>
          <div class="footer">
            <span class="pill"><span class="ok">●</span> Works offline • Extensible JSON map</span>
            <span class="kicker">Made for engineers, students, and the simply curious.</span>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
  // ====== Data model ======
  // Each category defines a base unit and either linear factors (to base) or custom to_base/from_base functions per unit.
  // Add/extend units by editing the "units" map below.
  const categories = {
    length: {
      label: "Length",
      base: "m",
      units: {
        m:{factor:1, name:"meter"}, km:{factor:1000, name:"kilometer"}, cm:{factor:0.01, name:"centimeter"}, mm:{factor:0.001, name:"millimeter"}, um:{factor:1e-6, name:"micrometer"}, nm:{factor:1e-9, name:"nanometer"}, angstrom:{factor:1e-10, name:"ångström"},
        in:{factor:0.0254, name:"inch"}, ft:{factor:0.3048, name:"foot"}, yd:{factor:0.9144, name:"yard"}, mi:{factor:1609.344, name:"mile"}, nmi:{factor:1852, name:"nautical mile"}
      }
    },
    mass: {
      label: "Mass",
      base: "kg",
      units: {
        kg:{factor:1, name:"kilogram"}, g:{factor:0.001, name:"gram"}, mg:{factor:1e-6, name:"milligram"}, ug:{factor:1e-9, name:"microgram"},
        metric_ton:{factor:1000, name:"tonne (metric)"}, short_ton:{factor:907.18474, name:"US ton (short)"}, long_ton:{factor:1016.0469088, name:"UK ton (long)"},
        lb:{factor:0.45359237, name:"pound"}, oz:{factor:0.028349523125, name:"ounce"}, stone:{factor:6.35029318, name:"stone"}, grain:{factor:0.00006479891, name:"grain"}
      }
    },
    time: {
      label: "Time",
      base: "s",
      units: {
        s:{factor:1, name:"second"}, ms:{factor:0.001, name:"millisecond"}, us:{factor:1e-6, name:"microsecond"}, ns:{factor:1e-9, name:"nanosecond"},
        min:{factor:60, name:"minute"}, h:{factor:3600, name:"hour"}, day:{factor:86400, name:"day"}, week:{factor:604800, name:"week"}, year:{factor:31536000, name:"year (365 d)"}
      }
    },
    area: {
      label: "Area",
      base: "m2",
      units: {
        m2:{factor:1, name:"square meter"}, cm2:{factor:1e-4, name:"square centimeter"}, mm2:{factor:1e-6, name:"square millimeter"}, km2:{factor:1e6, name:"square kilometer"},
        in2:{factor:0.00064516, name:"square inch"}, ft2:{factor:0.09290304, name:"square foot"}, yd2:{factor:0.83612736, name:"square yard"},
        acre:{factor:4046.8564224, name:"acre"}, hectare:{factor:10000, name:"hectare"}
      }
    },
    volume: {
      label: "Volume",
      base: "m3",
      units: {
        m3:{factor:1, name:"cubic meter"}, cm3:{factor:1e-6, name:"cubic centimeter"}, mm3:{factor:1e-9, name:"cubic millimeter"},
        L:{factor:0.001, name:"liter"}, mL:{factor:1e-6, name:"milliliter"},
        in3:{factor:0.000016387064, name:"cubic inch"}, ft3:{factor:0.028316846592, name:"cubic foot"},
        galUS:{factor:0.003785411784, name:"gallon (US)"}, galUK:{factor:0.00454609, name:"gallon (UK)"},
        qtUS:{factor:0.000946352946, name:"quart (US)"}, ptUS:{factor:0.000473176473, name:"pint (US)"}, cupUS:{factor:0.0002365882365, name:"cup (US)"},
        flozUS:{factor:2.95735295625e-5, name:"fluid ounce (US)"}, tbspUS:{factor:1.478676476e-5, name:"tablespoon (US)"}, tspUS:{factor:4.928921594e-6, name:"teaspoon (US)"}
      }
    },
    speed: {
      label: "Speed",
      base: "m_s",
      units: {
        m_s:{factor:1, name:"meter/second"}, km_h:{factor:1000/3600, name:"kilometer/hour"}, mph:{factor:0.44704, name:"mile/hour"}, knot:{factor:0.514444, name:"knot"}, ft_s:{factor:0.3048, name:"foot/second"}
      }
    },
    pressure: {
      label: "Pressure",
      base: "Pa",
      units: {
        Pa:{factor:1, name:"pascal"}, kPa:{factor:1000, name:"kilopascal"}, MPa:{factor:1e6, name:"megapascal"}, bar:{factor:1e5, name:"bar"},
        atm:{factor:101325, name:"atmosphere"}, psi:{factor:6894.757293168, name:"psi"}, torr:{factor:133.3223684211, name:"torr"}, mmHg:{factor:133.322387415, name:"mmHg"}, inHg:{factor:3386.38815789, name:"inch Hg"}
      }
    },
    energy: {
      label: "Energy",
      base: "J",
      units: {
        J:{factor:1, name:"joule"}, kJ:{factor:1000, name:"kilojoule"}, Wh:{factor:3600, name:"watt-hour"}, kWh:{factor:3.6e6, name:"kilowatt-hour"},
        cal:{factor:4.184, name:"calorie (thermochemical)"}, kcal:{factor:4184, name:"kilocalorie"}, BTU:{factor:1055.05585262, name:"BTU (IT)"}, eV:{factor:1.602176634e-19, name:"electronvolt"}
      }
    },
    power: {
      label: "Power",
      base: "W",
      units: {
        W:{factor:1, name:"watt"}, kW:{factor:1000, name:"kilowatt"}, MW:{factor:1e6, name:"megawatt"},
        hp_mech:{factor:745.69987158227, name:"horsepower (mechanical)"}, hp_metric:{factor:735.49875, name:"horsepower (metric)"}, BTU_per_hr:{factor:0.29307107, name:"BTU/hour"}
      }
    },
    temperature: {
      label: "Temperature",
      base: "K",
      units: {
        C:{name:"°C", to_base:v=>v+273.15, from_base:K=>K-273.15},
        F:{name:"°F", to_base:v=>(v-32)*5/9+273.15, from_base:K=>(K-273.15)*9/5+32},
        K:{name:"K", to_base:v=>v, from_base:K=>K},
        R:{name:"°R", to_base:v=>v*5/9, from_base:K=>K*9/5}
      }
    },
    frequency: {
      label: "Frequency",
      base: "Hz",
      units: { Hz:{factor:1, name:"hertz"}, kHz:{factor:1e3, name:"kilohertz"}, MHz:{factor:1e6, name:"megahertz"}, GHz:{factor:1e9, name:"gigahertz"}, RPM:{factor:1/60, name:"revolutions/min"} }
    },
    force: {
      label: "Force",
      base: "N",
      units: { N:{factor:1, name:"newton"}, kN:{factor:1000, name:"kilonewton"}, lbf:{factor:4.4482216152605, name:"pound‑force"}, kgf:{factor:9.80665, name:"kilogram‑force"}, dyn:{factor:1e-5, name:"dyne"} }
    },
    torque: {
      label: "Torque",
      base: "N_m",
      units: { N_m:{factor:1, name:"newton‑meter"}, lbf_ft:{factor:1.3558179483314, name:"lbf‑ft"}, lbf_in:{factor:0.11298482902762, name:"lbf‑in"}, kgf_m:{factor:9.80665, name:"kgf‑m"} }
    },
    density: {
      label: "Density",
      base: "kg_m3",
      units: { kg_m3:{factor:1, name:"kg/m³"}, g_cm3:{factor:1000, name:"g/cm³"}, g_L:{factor:1, name:"g/L"}, lb_ft3:{factor:16.01846337396, name:"lb/ft³"}, lb_in3:{factor:27679.904710191, name:"lb/in³"} }
    },
    fuel_economy: {
      label: "Fuel Economy",
      base: "L_per_100km",
      units: {
        L_per_100km:{name:"L/100km", to_base:v=>v, from_base:x=>x},
        km_per_L:{name:"km/L", to_base:v=>100/v, from_base:x=>100/x},
        mpg_US:{name:"mpg (US)", to_base:v=>235.214583/v, from_base:x=>235.214583/x},
        mpg_UK:{name:"mpg (UK)", to_base:v=>282.4809363/v, from_base:x=>282.4809363/x}
      }
    },
    data: {
      label: "Data",
      base: "B",
      units: {
        bit:{factor:1/8, name:"bit"}, B:{factor:1, name:"byte"},
        kB:{factor:1e3, name:"kilobyte (10³)"}, MB:{factor:1e6, name:"megabyte (10⁶)"}, GB:{factor:1e9, name:"gigabyte (10⁹)"}, TB:{factor:1e12, name:"terabyte (10¹²)"},
        KiB:{factor:1024, name:"kibibyte (2¹⁰)"}, MiB:{factor:1024**2, name:"mebibyte (2²⁰)"}, GiB:{factor:1024**3, name:"gibibyte (2³⁰)"}, TiB:{factor:1024**4, name:"tebibyte (2⁴⁰)"}
      }
    },
    angle: {
      label: "Angle",
      base: "rad",
      units: { rad:{factor:1, name:"radian"}, deg:{factor:Math.PI/180, name:"degree"}, grad:{factor:Math.PI/200, name:"gradian"}, arcmin:{factor:Math.PI/10800, name:"arcminute"}, arcsec:{factor:Math.PI/648000, name:"arcsecond"} }
    },
    flow: {
      label: "Flow Rate",
      base: "m3_s",
      units: { m3_s:{factor:1, name:"m³/s"}, L_s:{factor:1e-3, name:"L/s"}, L_min:{factor:1e-3/60, name:"L/min"}, m3_h:{factor:1/3600, name:"m³/h"}, ft3_s:{factor:0.028316846592, name:"ft³/s"}, GPM_US:{factor:0.003785411784/60, name:"gallon/min (US)"} }
    },
    illuminance: {
      label: "Illuminance",
      base: "lux",
      units: { lux:{factor:1, name:"lux"}, fc:{factor:10.76391041671, name:"foot‑candle"} }
    },
    voltage: {
      label: "Voltage",
      base: "V",
      units: { V:{factor:1, name:"volt"}, mV:{factor:1e-3, name:"millivolt"}, kV:{factor:1e3, name:"kilovolt"} }
    },
    current: {
      label: "Current",
      base: "A",
      units: { A:{factor:1, name:"ampere"}, mA:{factor:1e-3, name:"milliampere"}, uA:{factor:1e-6, name:"microampere"} }
    },
    resistance: {
      label: "Resistance",
      base: "ohm",
      units: { ohm:{factor:1, name:"ohm"}, kOhm:{factor:1e3, name:"kiloohm"}, MOhm:{factor:1e6, name:"megaohm"} }
    },
    capacitance: {
      label: "Capacitance",
      base: "F",
      units: { F:{factor:1, name:"farad"}, mF:{factor:1e-3, name:"millifarad"}, uF:{factor:1e-6, name:"microfarad"}, nF:{factor:1e-9, name:"nanofarad"}, pF:{factor:1e-12, name:"picofarad"} }
    },
    inductance: {
      label: "Inductance",
      base: "H",
      units: { H:{factor:1, name:"henry"}, mH:{factor:1e-3, name:"millihenry"}, uH:{factor:1e-6, name:"microhenry"} }
    },
    charge: {
      label: "Charge",
      base: "C",
      units: { C:{factor:1, name:"coulomb"}, mC:{factor:1e-3, name:"millicoulomb"}, uC:{factor:1e-6, name:"microcoulomb"}, Ah:{factor:3600, name:"ampere‑hour"}, mAh:{factor:3.6, name:"milliampere‑hour"} }
    },
    acceleration: {
      label: "Acceleration",
      base: "m_s2",
      units: { m_s2:{factor:1, name:"m/s²"}, g0:{factor:9.80665, name:"g (standard)"} }
    }
  };

  const quickList = ["length","mass","time","area","volume","speed","pressure","temperature","energy","power","data"];

  // ====== Helpers ======
  const byId = id => document.getElementById(id);
  const fmt = (num, decimals) => {
    if (!isFinite(num)) return "NaN";
    const nf = new Intl.NumberFormat(undefined, { maximumFractionDigits: decimals, useGrouping:true });
    return nf.format(Number(num.toFixed(decimals)));
  };
  const unitLabel = (catKey, uKey) => {
    const u = categories[catKey].units[uKey];
    return u.name ? `${u.name} (${uKey})` : uKey;
  };

  // ====== UI Init ======
  const categorySel = byId('category');
  const fromUnitSel = byId('fromUnit');
  const toUnitSel = byId('toUnit');
  const fromValueInput = byId('fromValue');
  const decimalsInput = byId('decimals');
  const fromSearch = byId('fromSearch');
  const resultBox = byId('result');
  const detailBox = byId('detail');
  const hexBox = byId('hexResult');

  function populateCategories(){
    categorySel.innerHTML = '';
    Object.entries(categories).forEach(([key, cat]) => {
      const opt = document.createElement('option');
      opt.value = key; opt.textContent = cat.label; categorySel.appendChild(opt);
    });
  }

  function populateQuick(){
    const qc = byId('quick-cats'); qc.innerHTML = '';
    quickList.forEach(k=>{
      if(!categories[k]) return;
      const b = document.createElement('button');
      b.textContent = categories[k].label; b.onclick = ()=>{ categorySel.value = k; onCategoryChange(); };
      qc.appendChild(b);
    });
  }

  function populateUnits(catKey){
    const cat = categories[catKey];
    const filter = fromSearch.value.trim().toLowerCase();
    const keys = Object.keys(cat.units).filter(k=> !filter || k.toLowerCase().includes(filter) || unitLabel(catKey, k).toLowerCase().includes(filter));
    fromUnitSel.innerHTML = ''; toUnitSel.innerHTML = '';
    keys.forEach(k=>{
      const o1=document.createElement('option'); o1.value=k; o1.textContent=unitLabel(catKey,k); fromUnitSel.appendChild(o1);
      const o2=document.createElement('option'); o2.value=k; o2.textContent=unitLabel(catKey,k); toUnitSel.appendChild(o2);
    });
    if(keys.length){ fromUnitSel.selectedIndex=0; toUnitSel.selectedIndex=Math.min(1, keys.length-1); }
  }

  function onCategoryChange(){
    const catKey = categorySel.value;
    populateUnits(catKey);
    compute();
  }

  // ====== Conversion Engine ======
  function toHex(n){
    if(!isFinite(n)) return '—';
    const neg = n < 0; const t = Math.trunc(Math.abs(n));
    return (neg ? '-0x' : '0x') + t.toString(16).toUpperCase();
  }
  function toBase(catKey, unitKey, val){
    const cat = categories[catKey]; const u = cat.units[unitKey];
    if('to_base' in u) return u.to_base(val);
    if('factor' in u) return val * u.factor;
    if('toBase' in u) return u.toBase(val);
    if('to_base' in cat.units[cat.base]) return cat.units[cat.base].to_base(val); // fallback
    return val;
  }
  function fromBase(catKey, unitKey, baseVal){
    const cat = categories[catKey]; const u = cat.units[unitKey];
    if('from_base' in u) return u.from_base(baseVal);
    if('factor' in u) return baseVal / u.factor;
    if('fromBase' in u) return u.fromBase(baseVal);
    return baseVal;
  }

  function convert(catKey, fromKey, toKey, val){
    const cat = categories[catKey];
    // Special categories with explicit to_base/from_base maps (e.g., temperature, fuel economy)
    const usesCustom = Object.values(cat.units).some(u => 'to_base' in u || 'from_base' in u);
    if(usesCustom){
      const baseVal = cat.units[fromKey].to_base ? cat.units[fromKey].to_base(val) : val;
      const out = cat.units[toKey].from_base ? cat.units[toKey].from_base(baseVal) : baseVal;
      return out;
    }
    // Linear factors via base
    const baseVal = toBase(catKey, fromKey, val);
    return fromBase(catKey, toKey, baseVal);
  }

  function compute(){
    const catKey = categorySel.value; if(!catKey) return;
    const fromKey = fromUnitSel.value; const toKey = toUnitSel.value; if(!fromKey || !toKey) return;
    const val = parseFloat(fromValueInput.value || '0'); const decimals = Math.max(0, Math.min(12, parseInt(decimalsInput.value||'6')));
    const out = convert(catKey, fromKey, toKey, val);
    resultBox.textContent = `${fmt(out, decimals)}  ${toKey}`;
    if(hexBox) hexBox.textContent = `${toHex(val)} → ${toHex(out)}`;

    // Details
    const cat = categories[catKey];
    let explanation = '';
    const custom = Object.values(cat.units).some(u => 'to_base' in u || 'from_base' in u);
    if(custom){
      if(catKey === 'temperature'){
        explanation = `Temperature conversion via absolute scale (K).`;
      } else if(catKey === 'fuel_economy'){
        explanation = `Fuel economy uses an inverse relationship: lower L/100km means higher mpg and km/L.`;
      }
    } else {
      explanation = `Converted by mapping each unit to the base (${cat.base}) with exact factors.`;
    }
    detailBox.innerHTML = `<span class="mono">${val} ${fromKey}</span> → <span class="mono">${toKey}</span>. ${explanation}`;
  }

  // ====== Events ======
  byId('convertBtn').addEventListener('click', compute);
  byId('swapBtn').addEventListener('click', () => { const t = toUnitSel.value; toUnitSel.value = fromUnitSel.value; fromUnitSel.value = t; compute(); });
  byId('copyBtn').addEventListener('click', async () => {
    const txt = resultBox.textContent.trim();
    try { await navigator.clipboard.writeText(txt); resultBox.style.outline = '2px solid var(--accent-2)'; setTimeout(()=>resultBox.style.outline='none', 600); }
    catch { alert('Copy failed.'); }
  });
  fromSearch.addEventListener('input', ()=>{ populateUnits(categorySel.value); });
  [fromUnitSel, toUnitSel, fromValueInput, decimalsInput].forEach(el=> el.addEventListener('input', compute));
  document.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); compute(); }});

  // ====== Startup ======
  populateCategories(); populateQuick();
  // Preselect a popular default
  categorySel.value = 'length'; onCategoryChange();

  // Deep-link support: #cat=pressure&from=psi&to=kPa&v=36
  const params = new URLSearchParams(location.hash.slice(1));
  if(params.get('cat') && categories[params.get('cat')]){
    categorySel.value = params.get('cat'); onCategoryChange();
    const catKey = categorySel.value;
    const setSel = (sel, key)=>{ if(categories[catKey].units[key]){ for(const o of sel.options){ if(o.value===key){ sel.value=key; break; } } } };
    setSel(fromUnitSel, params.get('from'));
    setSel(toUnitSel, params.get('to'));
    if(params.get('v')) fromValueInput.value = params.get('v');
    compute();
  }
  </script>
</body>
</html>
